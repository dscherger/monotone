# How to migrate pages to ikiwiki

1. fetch the page you're going to migrate, in raw original moinmoin
   markup style, into the workspace, and commit it as is for
   reference. (adjust as needed for some other tool, like wget or curl).

        ftp -o ZipperMerge.moin "http://www.venge.net/mtn-wiki/ZipperMerge?action=raw"
        mtn add ZipperMerge.moin
        mtn commit

2. rename the file and begin the process of migrating the markup

        sed -Ef moin2mdwn.sed <ZipperMerge.moin >ZipperMerge.mdwn
        mtn mv --bookkeep-only ZipperMerge.moin ZipperMerge.mdwn
        rm ZipperMerge.moin

   (sed's -E option is -r on Linux)
   this will automatically add `\[[!tag migration-wip]]` at the top
   of the file, tagging the page as one being worked on, but not yet
   finished, and convert emphasis notations.
   Commit and push this rev, so others can see you're working on
   this file, and can pick another to start next in parallel.

3. Translate the markup:

    * headers are done with leading `#` `##` etc rather than
      surrounding `==` etc

    * *some* and **more** emphasis is done with `*` rather than lots
      of single-quotes

    * Links are done with `\[[SquareBrackets]]` rather than bare
      `CamelCaseWords` 

    * preformatted code blocks are done with 4 more spaces (inside the
      current level of indentation, say when inside nested lists),
      rather than with  ```` and ````

    * use [[ikiwiki/formatting]] to help, and add more notes here

    * when migrating page markup, try to minimise the number of
      additional unrelated formatting changes (like reflowing
      paragraphs) in the same commit.
      That can be done as a separate step.

      When flowing paragraphs, try to follow the "new sentence, new
      line" convention.
      Ikiwiki uses a blank line to break paragraphs.
      This tends to mean that when someone else later adjusts a
      few words in a paragraph, we don't get many
      lines of sourounding diffs that are just reflowing.

4. Generate, test, rinse, repeat.  `commit` now and again if you like,
   because your page is still tagged as unfinished.

5. When you're happy, change to `\[[!tag migration-done]]`, save and
   commit again.

6. `GOTO 1`

##  running ikiwiki

to generate pages you can browse with a local webserver, use something like:

    ikiwiki --wikiname monotone --plugin rawhtml --plugin goodstuff --plugin graphviz --plugin table --exclude 'index\.mdwn' ikiwiki/checkout/dir/ output/dir/

if you want to use them with `file:` protocol with no need for a local webserver, the option `--no-usedirs` is suggested.
