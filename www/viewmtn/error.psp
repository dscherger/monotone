<html>
<head>
<title>Error</title>
</head>
<body>

<%

import common
hq = common.html_escape()

# now; if they raised a plain Exception() then we shall display a simple error 
# message without a traceback: this is an intentionally raised Exception rather than 
# a program error
e_type, e_value, e_traceback = sys.exc_info()

if (str(e_type) == "exceptions.Exception"):
   # this is a deliberate exception, pretty print
%>

<p>
<strong>An error has occurred:</strong>
</p>

<p>
<span style="color: blue;"><%= hq(str(e_value)) %></span>
</p>

<p>
If necessary, please report this error to the system administrator. You may wish to return 
to the <a href="index.psp">index page</a>.
</p>

<%
else:
    # show the raw exception
%>
<h1>Exception:</h1>

<p>
<%
    import traceback
    mesg = traceback.format_exception(e_type, e_value, e_traceback)
    mesg = map(hq, mesg)
    req.write('<pre>' + '<br />'.join(mesg) + '</pre>')

%>
</p>

</body>
</html>
