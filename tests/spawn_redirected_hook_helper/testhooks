function ignore_file (name)
  ok = true
  if existsonpath("cp") == 0 then
    pid = spawn_redirected ("", "", "errfile",
    	  		    "cp", "testhooks", "tofile")
    if pid == -1 then ok = false end
  elseif existsonpath("xcopy") == 0 then
    pid = spawn_redirected ("", "", "errfile",
    	  		    "xcopy", "/q", "/y", "testhooks", "tofile")
    if pid == -1 then ok = false end
  else
    ok = false
    x = io.open("skipfile", "w")
    x:close()
  end

  if ok then
    res, ret = wait(pid)
    if ret == -1 then ok = false end
    if ret ~= 0 then ok = false end
  end

  if ok then
    x = io.open("outfile", "w")
    x:close()
  end

  ignore_file = function (name) return true end
  return true
end
