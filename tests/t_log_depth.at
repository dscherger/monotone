AT_SETUP([only log a few entries instead of the whole log])
MONOTONE_SETUP

ADD_FILE(foo, [foo
])
AT_CHECK(MONOTONE --branch=testbranch commit --message "Addition of foo.",
         [], [ignore], [ignore])

ADD_FILE(bar, [bar
])
AT_CHECK(MONOTONE --branch=testbranch commit --message "Addition of bar.",
         [], [ignore], [ignore])

ADD_FILE(baz, [baz
])
AT_CHECK(MONOTONE --branch=testbranch commit --message "Addition of baz.",
         [], [ignore], [ignore])

AT_CHECK(MONOTONE log --depth=0, [1], [], [ignore])

AT_CHECK(MONOTONE log --depth=1 | grep '^Revision:' | wc -l, [], [1
], [ignore])

AT_CHECK(MONOTONE log --depth=2 | grep '^Revision:' | wc -l, [], [2
], [ignore])

AT_CLEANUP
