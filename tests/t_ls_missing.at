#  -*- Autoconf -*-

AT_SETUP([list missing files])

MONOTONE_SETUP

AT_DATA(foo, [the foo file
])

AT_DATA(bar, [the bar file
])

AT_CHECK(MONOTONE ls missing, [], [], [])

AT_CHECK(MONOTONE add foo bar, [], [ignore], [ignore])
AT_CHECK(MONOTONE ls missing, [], [], [])

AT_CHECK(rm foo, [], [], [])
AT_CHECK(MONOTONE ls missing, [], [foo
], [])

AT_CHECK(touch foo)
AT_CHECK(MONOTONE drop foo, [], [ignore], [ignore])
AT_CHECK(rm foo, [], [], [])
AT_CHECK(MONOTONE ls missing, [], [], [])

AT_CHECK(MONOTONE --branch=testbranch commit 'committed', [], [ignore], [ignore])
AT_CHECK(MONOTONE ls missing, [], [], [])

AT_CHECK(rm bar, [], [], [])
AT_CHECK(MONOTONE ls missing, [], [bar
], [])

AT_CHECK(touch bar)
AT_CHECK(MONOTONE drop bar, [], [ignore], [ignore])
AT_CHECK(rm bar, [], [], [])
AT_CHECK(MONOTONE ls missing, [], [], [])

AT_CLEANUP
