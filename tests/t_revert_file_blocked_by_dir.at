AT_SETUP([revert file blocked by unversioned directory])
MONOTONE_SETUP

# this test is a bug report
#
# reverting a file that has been replaced by a (non-versioned) directory
# should do something sensible. I'm not sure what that is though.
# this is almost a working copy conflict but it seems silly that revert
# would ever encounter a conflict.

AT_XFAIL_IF(true)

ADD_FILE(foo, [foo
])

COMMIT(testbranch)

AT_CHECK(MONOTONE --execute mv foo bar , [], [ignore], [ignore])

# create directory blocking revert of foo
AT_CHECK(mkdir foo)

AT_CHECK(MONOTONE revert . ,[], [ignore], [ignore])

AT_CLEANUP
