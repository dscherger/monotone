#  -*- Autoconf -*-

AT_SETUP([automate get_base_revision_id])
MTN_SETUP

# check an empty base revision id

AT_CHECK(MTN automate get_base_revision_id, [], [stdout], [ignore])
AT_CHECK(cmp _MTN/revision stdout, [0], [], [])

ADD_FILE(foo, [this is file foo
])

# check a non-empty base reivision id

COMMIT(testbranch)

AT_CHECK(MTN automate get_base_revision_id, [], [stdout], [ignore])
AT_CHECK(cmp _MTN/revision stdout, [0], [], [])

# check that pending changes don't affect the base revision id

ADD_FILE(foo, [this is foo
])

AT_CHECK(MTN automate get_base_revision_id, [], [stdout], [ignore])
AT_CHECK(cmp _MTN/revision stdout, [0], [], [])

AT_CLEANUP
