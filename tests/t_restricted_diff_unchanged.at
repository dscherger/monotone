AT_SETUP([diff -rREV1 -rREV2 UNCHANGED-FILE])
MTN_SETUP

ADD_FILE(testfile, [blah blah
])
ADD_FILE(otherfile, [foo bar
])
COMMIT(testbranch)
R1=`BASE_REVISION`

SET_FILE(otherfile, [stuff stuff
])
COMMIT(testbranch)
R2=`BASE_REVISION`

AT_CHECK(MTN diff -r$R1 -r$R2 testfile, [], [stdout], [ignore])
AT_CHECK(grep 'no changes' stdout, [0], [ignore], [ignore])
AT_CHECK(grep testfile  stdout, [1], [ignore], [ignore])
AT_CHECK(grep otherfile stdout, [1], [ignore], [ignore])

AT_CHECK(MTN diff -r$R1 -r$R2, [], [stdout], [ignore])
AT_CHECK(grep testfile  stdout, [1], [ignore], [ignore])
AT_CHECK(grep otherfile stdout, [0], [ignore], [ignore])

AT_CHECK(MTN diff -r$R1 -r$R2 badfile, [1], [ignore], [ignore])

AT_CLEANUP
