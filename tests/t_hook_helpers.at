AT_SETUP([test some hook helper functions])
MTN_SETUP

AT_DATA(testhooks, [function ignore_file (name)
	ok = true
	
	filename = write_to_temporary_file("foo")
	dat = read_contents_of_file(filename, "r")
	if dat ~= "foo" then ok = false end

	if globish_match("a*b", "abc") then ok = false end
	if not globish_match("a*b", "acb") then ok = false end
	if globish_match("a{b", "abc") ~= nil then ok = false end

	if ok then execute ("touch", "outfile") end

	ignore_file = function (name) return true end
	return true
end
])

AT_CHECK(RAW_MTN --rcfile testhooks ls unknown, [], [ignore], [ignore])
AT_CHECK(test -f outfile)

AT_CLEANUP
