AT_SETUP([update -b switches branches even when noop])
MTN_SETUP

ADD_FILE(testfile, [blah blah
])
COMMIT(testbranch)

RID1=`BASE_REVISION`

AT_CHECK(MTN cert $RID1 branch otherbranch, [], [ignore], [ignore])

AT_CHECK(QGREP(testbranch _MTN/options))
AT_CHECK(QGREP(otherbranch _MTN/options), [1])

AT_CHECK(MTN update -b otherbranch, [], [ignore], [ignore])
RID2=`BASE_REVISION`
AT_CHECK(test "$RID1" = "$RID2")

AT_CHECK(QGREP(testbranch _MTN/options), [1])
AT_CHECK(QGREP(otherbranch _MTN/options))

AT_CLEANUP