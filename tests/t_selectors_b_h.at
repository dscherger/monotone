AT_SETUP([b: and h: selectors])
MONOTONE_SETUP

ADD_FILE(testfile, [blah blah
])
COMMIT(testbranch)
REV1=`BASE_REVISION`

SET_FILE(testfile, [stuff stuff
])
COMMIT(testbranch)
REV2=`BASE_REVISION`

SET_FILE(testfile, [chew chew
])
COMMIT(otherbranch)
REV3=`BASE_REVISION`

CHECK_SAME_CANONICALISED_STDOUT((echo $REV1 && echo $REV2) | sort, MONOTONE automate select b:testbranch)
CHECK_SAME_CANONICALISED_STDOUT(echo $REV3, MONOTONE automate select b:otherbranch)
CHECK_SAME_CANONICALISED_STDOUT(echo $REV3, MONOTONE automate select b:)
CHECK_SAME_CANONICALISED_STDOUT(echo $REV2, MONOTONE automate select h:testbranch)
CHECK_SAME_CANONICALISED_STDOUT(echo $REV3, MONOTONE automate select h:otherbranch)
CHECK_SAME_CANONICALISED_STDOUT(echo $REV3, MONOTONE automate select h:)

AT_CLEANUP
