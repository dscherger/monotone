This directory keeps the win32 specific files.

To create a MinGW release, the 'make dist' target does not work for
MinGW. Instead, we use Inno Setup. Here are all the steps for
creating a MinGW release, on a fresh Windows machine:

Install MinGW tools; see ../INSTALL, MinGW section

Install a monotone binary; see http://monotone.ca/

Get a copy of the monotone repository; see
http://monotone.ca/wiki/SelfHostingInfo/

Check out the release version of monotone:
mtn -d /path/to/monotone.db checkout -r t:monotone-<version> monotone-<version>

Build the release. In an MSYS shell:
cd monotone-<version>
autoreconf -i
./configure  sqlite_LIBS=-lsqlite3
make
strip mtn.exe

Install Inno Setup and Inno Setup preprocessor; see
http://www.jrsoftware.org/isinfo.php, get the Quick Start Pack ispack-5.3.3.exe

In Inno Setup Itool, open monotone-<version>/win32/monotone.iss

Check that the APPVERS macro is correct.

If you have installed MinGW in a non-default place, adjust the
MINGWDIR macro to match.

If you have built monotone in a separate build directory, adjust
the BUILDDIR macro to match.

Verify the number of info-* files to copy.

Update the list of non-Microsoft dlls. Current list:

DLL                source
libiconv-2.dll      libiconv
libidn-11.dll       libidn
libintl-8.dll       gettext
libpcre-0.dll       pcre
libz-1.dll          zlib

You can check the dlls needed by running the Depends tool from
http://www.dependencywalker.com/

Choose menu Build | Compile (or click the "compile" button, or run the
Inno Setup compiler ISCC.exe from the command line). This generates
monotone-<version>-setup.exe in the monotone/win32 directory.

Publish the binary on the monotone website with proper permissions:

chmod a+r monotone-<version>/win32/monotone-<version>-setup.exe
scp -p monotone-<version>/win32/monotone-<version>-setup.exe mtn-uploads@monotone.ca:downloads/<version>

checkout the web files:

mtn -d /path/to/monotone.db checkout --branch net.venge.monotone.web monotone.web

Edit monotone.web/index.html; search for <li>Windows, uncomment it

Commit and sync.

Download from the web and test!
