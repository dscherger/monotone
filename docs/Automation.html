<html lang="en">
<head><link type="text/css" rel="stylesheet" href="texinfo.css" />
<title>Automation - monotone documentation</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="monotone documentation">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Command-Reference.html#Command-Reference" title="Command Reference">
<link rel="prev" href="Database.html#Database" title="Database">
<link rel="next" href="RCS.html#RCS" title="RCS">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Automation"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="RCS.html#RCS">RCS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Database.html#Database">Database</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Command-Reference.html#Command-Reference">Command Reference</a>
<hr>
</div>

<h3 class="section">5.9 Automation</h3>

<p>This section contains subcommands of the <samp><span class="command">mtn automate</span></samp> command,
used for scripting monotone.  All give output on <code>stdout</code>; they may
also give useful chatter on <code>stderr</code>, including warnings and error
messages.

     <dl>
<dt><samp><span class="command">mtn automate interface_version</span></samp><a name="index-mtn-automate-interface_005fversion-139"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
0.0

          <br><dt><strong>Purpose:</strong><dd>
Prints version of the automation interface.  Major number increments
whenever a backwards incompatible change is made to the <samp><span class="command">automate</span></samp>
command; minor number increments whenever any change is made (but is
reset when major number increments).

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          1.2
     </pre>

          <br><dt><strong>Output format:</strong><dd>
A decimal number, followed by &ldquo;.&rdquo; (full stop/period), followed by a
decimal number, followed by a newline, followed by end-of-file.  The
first decimal number is the major version, the second is the minor version.

          <br><dt><strong>Error conditions:</strong><dd>
None.

     </dl>

     <br><dt><samp><span class="command">mtn automate heads [</span><var>branch</var><span class="command">]</span></samp><a name="index-mtn-automate-heads-_005b_0040var_007bbranch_007d_005d-140"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One branch name,  <var>branch</var>. If none is given, the current default branch is used.

          <br><dt><strong>Added in:</strong><dd>
0.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the heads of branch <var>branch</var>.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving the ID of one head of the given branch. 
Each line consists of a revision ID, in hexadecimal, followed by a
newline.  The lines are printed in alphabetically sorted order.

          <br><dt><strong>Error conditions:</strong><dd>
If the given branch contains no members or does not exist, then no lines are printed.

     </dl>

     <br><dt><samp><span class="command">mtn automate ancestors </span><var>rev1</var><span class="command"> [</span><var>rev2</var><span class="command"> [...]]</span></samp><a name="index-mtn-automate-ancestors-_0040var_007brev1_007d-_005b_0040var_007brev2_007d-_005b_002e_002e_002e_005d_005d-141"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One or more revision IDs, <var>rev1</var>, <var>rev2</var>, etc.

          <br><dt><strong>Added in:</strong><dd>
0.2

          <br><dt><strong>Purpose:</strong><dd>
Prints the ancestors of one or more revisions.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving the ID of one ancestor of the given
revisions.  Each line consists of a revision ID, in hexadecimal,
followed by a newline.  The lines are printed in alphabetically sorted
order.

          <p>The output does not include <var>rev1</var>, <var>rev2</var>, etc., except if
<var>rev2</var> is itself an ancestor of <var>rev1</var>, then <var>rev2</var> will be
included in the output.

          <br><dt><strong>Error conditions:</strong><dd>
If any of the revisions do not exist, prints nothing to stdout, prints
an error message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate common_ancestors </span><var>rev1</var><span class="command"> [</span><var>rev2</var><span class="command"> [...]]</span></samp><a name="index-mtn-automate-common_005fancestors-_0040var_007brev1_007d-_005b_0040var_007brev2_007d-_005b_002e_002e_002e_005d_005d-142"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One or more revision IDs, <var>rev1</var>, <var>rev2</var>, etc.

          <br><dt><strong>Added in:</strong><dd>
2.1

          <br><dt><strong>Purpose:</strong><dd>
Prints all revisions which are ancestors of all of the revisions given as
arguments.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving the ID of one common ancestor of all the given
revisions.  Each line consists of a revision ID, in hexadecimal,
followed by a newline.  The lines are printed in alphabetically sorted
order.

          <p>The output will include one of the argument revisions only if that revision is
an ancestor of all other revisions given as arguments.

          <br><dt><strong>Error conditions:</strong><dd>
If any of the revisions do not exist, prints nothing to stdout, prints
an error message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate parents </span><var>rev</var></samp><a name="index-mtn-automate-parents-_0040var_007brev_007d-143"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One revision ID, <var>rev</var>.

          <br><dt><strong>Added in:</strong><dd>
0.2

          <br><dt><strong>Purpose:</strong><dd>
Prints the immediate parents of a revision.  This is like a
non-recursive version of <samp><span class="command">automate ancestors</span></samp>.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving the ID of one parent of the given
revision.  Each line consists of a revision ID, in hexadecimal,
followed by a newline.  The lines are printed in alphabetically sorted
order.

          <br><dt><strong>Error conditions:</strong><dd>
If the given revision <var>rev</var> does not exist, prints nothing to
stdout, prints an error message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate descendents </span><var>rev1</var><span class="command"> [</span><var>rev2</var><span class="command"> [...]]</span></samp><a name="index-mtn-automate-descendents-_0040var_007brev1_007d-_005b_0040var_007brev2_007d-_005b_002e_002e_002e_005d_005d-144"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One or more revision IDs, <var>rev1</var>, <var>rev2</var>, etc.

          <br><dt><strong>Added in:</strong><dd>
0.1

          <br><dt><strong>Purpose:</strong><dd>
Prints the descendants of one or more revisions.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving the ID of one descendant of the given
revisions.  Each line consists of a revision ID, in hexadecimal,
followed by a newline.  The lines are printed in alphabetically sorted
order.

          <p>The output does not include <var>rev1</var>, <var>rev2</var>, etc., except that if
<var>rev2</var> is itself a descendant of <var>rev1</var>, then <var>rev2</var> will be
included in the output.

          <br><dt><strong>Error conditions:</strong><dd>
If any of the revisions do not exist, prints nothing to stdout, prints
an error message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate children </span><var>rev</var></samp><a name="index-mtn-automate-children-_0040var_007brev_007d-145"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One revision ID, <var>rev</var>.

          <br><dt><strong>Added in:</strong><dd>
0.2

          <br><dt><strong>Purpose:</strong><dd>
Prints the immediate children of a revision.  This is like a
non-recursive version of <samp><span class="command">automate descendents</span></samp>.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving the ID of one child of the given
revision.  Each line consists of a revision ID, in hexadecimal,
followed by a newline.  The lines are printed in alphabetically sorted
order.

          <br><dt><strong>Error conditions:</strong><dd>
If the given revision <var>rev</var> does not exist, prints nothing to
stdout, prints an error message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate graph</span></samp><a name="index-mtn-automate-graph-146"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
0.2

          <br><dt><strong>Purpose:</strong><dd>
Prints out the complete ancestry graph of this database.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          0c05e8ec9c6af4224672c7cc4c9ef05ae8bdb794
          27ebcae50e1814e35274cb89b5031a423c29f95a 5830984dec5c41d994bcadfeab4bf1bf67747b89
          4e284617c80bec7da03925062a84f715c1b042bd 27ebcae50e1814e35274cb89b5031a423c29f95a 657c756d24fb65213d59f4ae07e117d830dcc95b
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving ancestry information for one revision. 
Each line begins with a revision ID.  Following this are zero or more
space-prefixed revision IDs.  Each revision ID after the first is a
parent (in the sense of <samp><span class="command">automate parents</span></samp>) of the first.  For
instance, in the above sample output,
0c05e8ec9c6af4224672c7cc4c9ef05ae8bdb794 is a root node,
27ebcae50e1814e35274cb89b5031a423c29f95a has one parent, and
4e284617c80bec7da03925062a84f715c1b042bd has two parents, i.e., is a
merge node.

          <p>The output as a whole is alphabetically sorted by line; additionally,
the parents within each line are alphabetically sorted.

          <br><dt><strong>Error conditions:</strong><dd>
None.

     </dl>

     <br><dt><samp><span class="command">mtn automate erase_ancestors [</span><var>rev1</var><span class="command"> [</span><var>rev2</var><span class="command"> [...]]]</span></samp><a name="index-mtn-automate-erase_005fancestors-_005b_0040var_007brev1_007d-_005b_0040var_007brev2_007d-_005b_002e_002e_002e_005d_005d_005d-147"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One or more revision IDs, <var>rev1</var>, <var>rev2</var>, etc.

          <br><dt><strong>Added in:</strong><dd>
0.1

          <br><dt><strong>Purpose:</strong><dd>
Prints all arguments, except those that are an ancestor of some other
argument.  One way to think about this is that it prints the minimal
elements of the given set, under the ordering imposed by the &ldquo;child
of&rdquo; relation.  Another way to think of it is if the arguments formed a
branch, then we would print the heads of that branch.  If there
are no arguments, prints nothing.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving the ID of one descendant of the given
revisions.  Each line consists of a revision ID, in hexadecimal,
followed by a newline.  The lines are printed in alphabetically sorted
order.

          <br><dt><strong>Error conditions:</strong><dd>
If any of the revisions do not exist, prints nothing to stdout, prints
an error message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate toposort [</span><var>rev1</var><span class="command"> [</span><var>rev2</var><span class="command"> [...]]]</span></samp><a name="index-mtn-automate-toposort-_005b_0040var_007brev1_007d-_005b_0040var_007brev2_007d-_005b_002e_002e_002e_005d_005d_005d-148"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One or more revision IDs, <var>rev1</var>, <var>rev2</var>, etc.

          <br><dt><strong>Added in:</strong><dd>
0.1

          <br><dt><strong>Purpose:</strong><dd>
Prints all arguments, topologically sorted.  I.e., if <var>rev1</var> is an
ancestor of <var>rev2</var>, then <var>rev1</var> will appear before <var>rev2</var> in
the output; if <var>rev2</var> is an ancestor of <var>rev1</var>, then <var>rev2</var>
will appear before <var>rev1</var> in the output; and if neither is an
ancestor of the other, then they may appear in either order.  If there
are no arguments, prints nothing.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
A list of revision IDs, in hexadecimal, each followed by a newline. 
Revisions are printed in topologically sorted order.

          <br><dt><strong>Error conditions:</strong><dd>
If any of the revisions do not exist, prints nothing to stdout, prints
an error message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate ancestry_difference </span><var>new</var><span class="command"> [</span><var>old1</var><span class="command"> [</span><var>old2</var><span class="command"> [...]]]</span></samp><a name="index-mtn-automate-ancestry_005fdifference-_0040var_007bnew_007d-_005b_0040var_007bold1_007d-_005b_0040var_007bold2_007d-_005b_002e_002e_002e_005d_005d_005d-149"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
A &ldquo;new&rdquo; revision ID <var>new</var>, followed by zero or more &ldquo;old&rdquo;
revision IDs <var>old1</var>, <var>old2</var>, etc.

          <br><dt><strong>Added in:</strong><dd>
0.1

          <br><dt><strong>Purpose:</strong><dd>
Prints all ancestors of the revision <var>new</var>, that are not also
ancestors of one of the old revisions.  For purposes of this command,
&ldquo;ancestor&rdquo; is an inclusive term; for example, if <var>new</var> is an
ancestor of <var>old1</var>, it will not be printed; but if <var>new</var> is not
an ancestor of any of the &ldquo;old&rdquo; revisions, then it will be. 
Similarly, <var>old1</var> will never be printed, because it is considered to
be an ancestor of itself.  The reason for the names is that if <var>new</var>
a new revision, and <var>old1</var>, <var>old2</var>, etc. are revisions that you
have processed before, then this command tells you which revisions are
new since then.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
A list of revision IDs, in hexadecimal, each followed by a newline. 
Revisions are printed in topologically sorted order.

          <br><dt><strong>Error conditions:</strong><dd>
If any of the revisions do not exist, prints nothing to stdout, prints
an error message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate leaves</span></samp><a name="index-mtn-automate-leaves-150"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
0.1

          <br><dt><strong>Purpose:</strong><dd>
Prints the leaves of the revision graph, i.e. all revision that have no
children.  This is similar, but not identical to the functionality of
<samp><span class="command">heads</span></samp>, which prints every revision in a branch, that has no
descendants in that branch.  If every revision in the database was in
the same branch, then they would be identical.  Generally, every leaf is
the head of some branch, but not every branch head is a leaf.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each a leaf of the revision graph.  Each line
consists of a revision ID, in hexadecimal, followed by a newline.  The
lines are printed in alphabetically sorted order.

          <br><dt><strong>Error conditions:</strong><dd>
None.

     </dl>

     <br><dt><samp><span class="command">mtn automate roots</span></samp><a name="index-mtn-automate-roots-151"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
4.3

          <br><dt><strong>Purpose:</strong><dd>
Prints the roots of the revision graph, i.e. all revisions that have
no parents.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          276264b0b3f1e70fc1835a700e6e61bdbe4c3f2f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each a root of the revision graph.  Each line
consists of a revision ID, in hexadecimal, followed by a newline.  The
lines are printed in alphabetically sorted order.

          <br><dt><strong>Error conditions:</strong><dd>
None.

     </dl>

     <br><dt><samp><span class="command">mtn automate branches</span></samp><a name="index-mtn-automate-branches-152"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
2.2

          <br><dt><strong>Purpose:</strong><dd>
Prints all branch certs present in the revision graph, that are not
excluded by the Lua hook <code>ignore_branch</code>.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          net.venge.monotone
          net.venge.monotone.win32
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each the name of a branch. The lines are printed
in alphabetically sorted order.

          <br><dt><strong>Error conditions:</strong><dd>
None.

     </dl>

     <br><dt><samp><span class="command">mtn automate tags [</span><var>branch_pattern</var><span class="command">]</span></samp><a name="index-mtn-automate-tags-_005b_0040var_007bbranch_005fpattern_007d_005d-153"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
A branch pattern (optional).

          <br><dt><strong>Added in:</strong><dd>
2.2

          <br><dt><strong>Purpose:</strong><dd>
If a branch pattern is given, prints all tags that are attached to
revisions on branches matched by the pattern; otherwise prints all
tags of the revision graph.

          <p>If a branch name is ignored by means of the Lua hook
<code>ignore_branch</code>, it is neither printed, nor can it be matched by
a pattern.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          format_version "1"
          
               tag "monotree-0.3"
          revision [35cff8e8ba14155f5f7ddf7965073f514fd60f61]
            signer "njs@pobox.com"
          branches "net.venge.monotone.contrib.monotree"
          
               tag "monotree-0.2"
          revision [5d288b39b49613b0d9dca8ece6b9a42c3773f35b]
            signer "njs@pobox.com"
          branches "net.venge.monotone.contrib.monotree"
          
               tag "monotree-0.1"
          revision [8a121346ce2920b6f85df68b3b620de96bd14a8d]
            signer "njs@pobox.com"
          branches "net.venge.monotone.contrib" "net.venge.monotone.contrib.monotree"
          
               tag "monotree-0.4"
          revision [f1afc520474f83c58262896ede027ef77226046e]
            signer "njs@pobox.com"
          branches "net.venge.monotone.contrib.monotree"
     </pre>

          <br><dt><strong>Output format:</strong><dd>
There is one basic_io stanza for each tag.

          <p>All stanzas are formatted by basic_io. Stanzas are separated by a
blank line. Values will be escaped, '\' to '\\' and '"' to '\"'.

          <p>Each stanza has exactly the following four entries:

               <dl>
<dt><samp><span class="option">'tag'</span></samp><dd>the value of the tag cert, i.e. the name of the tag

               <br><dt><samp><span class="option">'revision'</span></samp><dd>the hexadecimal id of the revision the tag is attached to

               <br><dt><samp><span class="option">'signer'</span></samp><dd>the name of the key used to sign the tag cert

               <br><dt><samp><span class="option">'branches'</span></samp><dd>a (possibly empty) list of all branches the tagged revision is on
</dl>

          <p>Stanzas are printed in arbitrary order.

          <br><dt><strong>Error conditions:</strong><dd>
A run-time exception occurs if an illegal branch pattern is
specified.

     </dl>

     <br><dt><samp><span class="command">mtn automate select </span><var>selector</var></samp><a name="index-mtn-automate-select-_0040var_007bselector_007d-154"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One selector (or combined selector).

          <br><dt><strong>Added in:</strong><dd>
0.2

          <br><dt><strong>Purpose:</strong><dd>
Print all revisions that match the given selector.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
          75156724e0e2e3245838f356ec373c50fa469f1f
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more lines, each giving the ID of one revision that matches the
given selector.  Each line consists of a revision ID, in hexadecimal,
followed by a newline.  Revision ids are printed in alphabetically
sorted order.

          <br><dt><strong>Error conditions:</strong><dd>
None.

     </dl>

     <br><dt><samp><span class="command">mtn automate identify </span><var>path</var></samp><a name="index-mtn-automate-identify-_0040var_007bpath_007d-155"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
A file path.

          <br><dt><strong>Added in:</strong><dd>
4.3

          <br><dt><strong>Purpose:</strong><dd>
Prints the file ID (aka hash) of the given file.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          6265ab1312fbe38bdc3aafa92441139cb2b779b0
     </pre>

          <br><dt><strong>Output format:</strong><dd>
A single line with the file's ID, in hexadecimal, followed by a newline.

          <br><dt><strong>Error conditions:</strong><dd>
If the file does not exists, is a special file or not readable, prints an
error message to stderr and exists with status 1. A single file path only
consisting of "-" is disallowed since it collides with the UNIX stdin
marker.

     </dl>

     <br><dt><samp><span class="command">mtn automate inventory [<samp>options...</samp>] [</span><var>files...</var><span class="command">]</span></samp><a name="index-mtn-automate-inventory-_005b_0040option_007boptions_002e_002e_002e_007d_005d-_005b_0040var_007bfiles_002e_002e_002e_007d_005d-156"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One or more file paths (optional). If present, only show an inventory for the
given files or directories (and their sub-directories).

               <dl>
<dt><samp><span class="option">--depth=</span><var>n</var></samp><dd>Maximum number of directories to descend.

               <br><dt><samp><span class="option">--exclude=</span><var>exclude-glob</var></samp><dd>File or directory to exclude.

               <br><dt><samp><span class="option">--no-ignored</span></samp><dd>Don't output ignored files or directories.

               <br><dt><samp><span class="option">--no-unknown</span></samp><dd>Don't output unknown directories.

               <br><dt><samp><span class="option">--no-unchanged</span></samp><dd>Don't output files that are known but not changed in any way.

               <br><dt><samp><span class="option">--no-corresponding-renames</span></samp><dd>If restricted to a renamed path, do not output the corresponding old / new
paths for this restriction.

          </dl>

          <br><dt><strong>Changes:</strong><dd>
               <ul>
<li>8.0 &ndash; added the output of the <code>birth</code> key
<li>7.0 &ndash; added options <samp><span class="option">--no-ignored</span></samp>, <samp><span class="option">--no-unknown</span></samp>,
<samp><span class="option">--no-unchanged</span></samp> and <samp><span class="option">--no-corresponding-renames</span></samp>
<li>6.0 &ndash; converted to basic_io format (restriction support, various fixes)
<li>1.0 &ndash; initial, line-based format
</ul>

          <br><dt><strong>Purpose:</strong><dd>
Prints the inventory of every file found in the workspace or its
associated base and revision manifests. Each unique path is
listed in a basic_io stanza. Stanzas are separated by blank lines.

          <br><dt><strong>Sample output:</strong><dd>
All basic status cases:
<pre class="verbatim">          
              path "added"
          new_type "file"
           fs_type "file"
            status "added" "known"
           changes "content"
          
              path "attributes_altered"
          old_type "file"
          new_type "file"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "known"
           changes "attrs"
          
              path "dropped"
          old_type "file"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "dropped"
          
             path "ignored~"
          fs_type "file"
           status "ignored"
          
              path "missing"
          old_type "file"
          new_type "file"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "missing"
          
              path "original"
          old_type "file"
          new_path "renamed"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source"
          
              path "patched"
          old_type "file"
          new_type "file"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "known"
           changes "content"
          
              path "patched_and_attributes_altered"
          old_type "file"
          new_type "file"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "known"
           changes "content" "attrs"
          
              path "renamed"
          new_type "file"
          old_path "original"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_target" "known"
          
              path "unchanged"
          old_type "file"
          new_type "file"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "known"
          
             path "unknown"
          fs_type "file"
           status "unknown"
     </pre>

          <p>Two files swapped in both the revision manifest and the workspace:
<pre class="verbatim">          
              path "original"
          old_type "file"
          new_path "unchanged"
          new_type "file"
          old_path "unchanged"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
          
              path "unchanged"
          old_type "file"
          new_path "original"
          new_type "file"
          old_path "original"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
     </pre>

          <p>Recorded in the revision manifest that two files were swapped, but
they were not actually swapped in the workspace. Thus they both appear
as patched:
<pre class="verbatim">          
              path "original"
          old_type "file"
          new_path "unchanged"
          new_type "file"
          old_path "unchanged"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
           changes "content"
          
              path "unchanged"
          old_type "file"
          new_path "original"
          new_type "file"
          old_path "original"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
           changes "content"
          
     </pre>

          <p>Rename (in the manifest and the workspace) <samp><span class="file">foo</span></samp> to <samp><span class="file">bar</span></samp>;
add (in the manifest and the workspace) new file <samp><span class="file">foo</span></samp>:
<pre class="verbatim">          
              path "foo"
          old_type "file"
          new_path "bar"
          new_type "file"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "added" "known"
          
              path "bar"
          new_type "file"
          old_path "foo"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_target" "known"
     </pre>

          <p>Rotated files <samp><span class="file">foo</span></samp> -&gt; <samp><span class="file">bar</span></samp> -&gt; <samp><span class="file">baz</span></samp> -&gt; <samp><span class="file">foo</span></samp> (in
the manifest and the workspace):
<pre class="verbatim">          
              path "foo"
          old_type "file"
          new_path "bar"
          new_type "file"
          old_path "baz"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
          
              path "bar"
          old_type "file"
          new_path "baz"
          new_type "file"
          old_path "foo"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
          
              path "baz"
          old_type "file"
          new_path "foo"
          new_type "file"
          old_path "bar"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
     </pre>

          <p>Recorded in the revison manifest the rotation of files <samp><span class="file">foo</span></samp> -&gt;
<samp><span class="file">bar</span></samp> -&gt; <samp><span class="file">baz</span></samp> -&gt; <samp><span class="file">foo</span></samp>, but the actual files in the
workspace were not moved, so monotone interprets all files as having
been patched:
<pre class="verbatim">          
              path "foo"
          old_type "file"
          new_path "bar"
          new_type "file"
          old_path "baz"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
           changes "content"
          
              path "bar"
          old_type "file"
          new_path "baz"
          new_type "file"
          old_path "foo"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
           changes "content"
          
              path "baz"
          old_type "file"
          new_path "foo"
          new_type "file"
          old_path "bar"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "rename_target" "known"
           changes "content"
     </pre>

          <p>Dropped from the manifest but not removed in the workspace and thus
unknown:
<pre class="verbatim">          
              path "dropped"
          old_type "file"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "dropped" "unknown"
     </pre>

          <p>Added in the manifest but not in the workspace, and thus missing:
<pre class="verbatim">          
              path "added"
          new_type "file"
           fs_type "none"
            status "added" "missing"
     </pre>

          <p>Recorded a rename in the manifest, but not moved in the workspace,
and thus unknown source and missing target:
<pre class="verbatim">          
              path "original"
          old_type "file"
          new_path "renamed"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source" "unknown"
          
              path "renamed"
          new_type "file"
          old_path "original"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_target" "missing"
     </pre>

          <p>Moved in the workspace but no rename recorded in the manifest, and
thus missing source and unknown target:
<pre class="verbatim">          
              path "original"
          old_type "file"
          new_type "file"
           fs_type "none"
            status "missing"
          
             path "renamed"
          fs_type "file"
           status "unknown"
     </pre>

          <p>Renamed in the manifest and the workspace and patched:
<pre class="verbatim">          
              path "original"
          old_type "file"
          new_path "renamed"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source"
          
              path "renamed"
          new_type "file"
          old_path "original"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_target" "known"
           changes "content"
     </pre>

          <p>Renamed and restricted to <samp><span class="file">original</span></samp> or <samp><span class="file">renamed</span></samp>:
<pre class="verbatim">          
              path "original"
          old_type "file"
          new_path "renamed"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source"
          
              path "renamed"
          new_type "file"
          old_path "original"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_target" "known"
           changes "content"
     </pre>

          <p>Renamed and restricted to <samp><span class="file">original</span></samp> with the <samp><span class="option">--no-corresponding-renames</span></samp> option:
<pre class="verbatim">          
              path "original"
          old_type "file"
          new_path "renamed"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source"
     </pre>

          <p>Renamed and restricted to <samp><span class="file">renamed</span></samp> with the <samp><span class="option">--no-corresponding-renames</span></samp> option:
<pre class="verbatim">          
              path "renamed"
          new_type "file"
          old_path "original"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_target" "known"
           changes "content"
     </pre>

          <p>File is missing, an unversioned directory is in the way:
<pre class="verbatim">          
              path "missing_file"
          old_type "file"
          new_type "file"
           fs_type "directory"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "invalid"
           changes "content"
     </pre>

          <p>Directory is missing, an unversioned file is in the way:
<pre class="verbatim">          
              path "missing_directory"
          old_type "directory"
          new_type "directory"
           fs_type "file"
            status "invalid"
     </pre>

          <p>Directory <samp><span class="file">source</span></samp> renamed to <samp><span class="file">target</span></samp>, <samp><span class="file">target</span></samp> is missing, an
unversioned file is in the way:
<pre class="verbatim">          
              path "source"
          old_type "directory"
          new_path "target"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source"
          
              path "source/a"
          old_type "file"
          new_path "target/a"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_source"
          
              path "target"
          new_type "directory"
          old_path "source"
           fs_type "file"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_target" "invalid"
          
              path "target/a"
          new_type "file"
          old_path "source/a"
           fs_type "none"
             birth [cb271687054afd3c2b873c8994f206f08fb240d3]
            status "rename_target" "missing"
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Each path is printed in one basic_io stanza. Stanzas are separated by
a blank line. Each stanza starts with a <code>path</code> line, and contains
up to seven lines. The order of the lines is not important, and may
change in future revisions, except that the first line will always be
<code>path</code>.

               <dl>
<dt><samp><span class="option">path</span></samp><dd>The file or directory path, relative to the workspace root. The file
either exists in the workspace, or is listed in the base or revision
manifest. 
<samp><span class="option">path</span></samp> is always output.

               <br><dt><samp><span class="option">old_type</span></samp><dd>The type of the node in the base manifest. 
&ldquo;type&rdquo; is either <samp><span class="option">file</span></samp> or <samp><span class="option">directory</span></samp>. 
<samp><span class="option">old_type</span></samp> is output for all old nodes (i.e. unchanged or dropped paths
and rename sources).

               <br><dt><samp><span class="option">new_type</span></samp><dd>The type of the node in the revision manifest. 
&ldquo;type&rdquo; is either <samp><span class="option">file</span></samp> or <samp><span class="option">directory</span></samp>. 
<samp><span class="option">new_type</span></samp> is output for all new nodes (i.e. unchanged or added paths
and rename targets).

               <br><dt><samp><span class="option">fs_type</span></samp><dd>The type of the node in the workspace (also called the filesystem). 
&ldquo;type&rdquo; is either <samp><span class="option">file</span></samp>, <samp><span class="option">directory</span></samp> or <samp><span class="option">none</span></samp>
(if the path does not exist in the file system). 
<samp><span class="option">fs_type</span></samp> is always output.

               <br><dt><samp><span class="option">old_path</span></samp><dd>The old path for the node, if it has been renamed in the revision
manifest. 
<samp><span class="option">old_path</span></samp> is only output for rename targets.

               <br><dt><samp><span class="option">new_path</span></samp><dd>The new path for the node, if it has been renamed in the revision
manifest. 
<samp><span class="option">new_path</span></samp> is only output for rename sources.

               <br><dt><samp><span class="option">birth</span></samp><dd>The identify of the revision that the node was first added in. 
<samp><span class="option">birth</span></samp> is only output if it exists in a committed revision.

               <br><dt><samp><span class="option">status</span></samp><dd><samp><span class="option">status</span></samp> is always output. Its value is one or more of:

                    <dl>
<dt><samp><span class="option">rename_source</span></samp><dd><var>path</var> is part of a rename and denotes the old name of a renamed node.

                    <br><dt><samp><span class="option">rename_target</span></samp><dd><var>path</var> is part of a rename and denotes the new name of a renamed node.

                    <br><dt><samp><span class="option">added</span></samp><dd><var>path</var> has been added in the revision manifest, but not existent in the
base manifest.

                    <br><dt><samp><span class="option">dropped</span></samp><dd><var>path</var> has been deleted in the revision manifest and the workspace.

                    <br><dt><samp><span class="option">missing</span></samp><dd><var>path</var> has been deleted in the workspace, but still exists in the revision
manifest.

                    <p>A file will also be labeled <samp><span class="option">missing</span></samp> if it is in a directory
that is ignored due to a regular expression in <samp><span class="file">.mtn-ignore</span></samp>, but
is also in the revision manifest. A warning is issued in this case.

                    <br><dt><samp><span class="option">ignored</span></samp><dd><var>path</var> is ignored by monotone.

                    <br><dt><samp><span class="option">known</span></samp><dd><var>path</var> exists in the workspace, and in the revision manifest.

                    <br><dt><samp><span class="option">unknown</span></samp><dd><var>path</var> exists in the workspace, but not in the revision manifest, i.e. 
is unversioned.

                    <br><dt><samp><span class="option">invalid</span></samp><dd><var>path</var> is versioned and exists in the workspace and revision manifest, but
with incompatible types (a versioned missing file is replaced by an
unversioned directory and vice versa). 
</dl>

               <br><dt><samp><span class="option">changes</span></samp><dd>
                    <dl>
   <dt><samp><span class="option">content</span></samp><dd>   The contents of a file have been changed.

                    <br><dt><samp><span class="option">attrs</span></samp><dd>   The attributes of a path (file or directory) have been changed.

               </dl>
               </dl>

          <br><dt><strong>Error conditions:</strong><dd>
When executed from outside of a workspace directory, prints an error
message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate certs </span><var>id</var></samp><a name="index-mtn-automate-certs-_0040var_007bid_007d-157"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
A revision ID <var>id</var>, for which any certificates will be printed.

          <br><dt><strong>Added in:</strong><dd>
1.0

          <br><dt><strong>Purpose:</strong><dd>
Prints all certificates associated with the given revision ID. 
Each certificate is contained in a basic IO stanza. For each certificate,
the following values are provided:
<pre class="verbatim">          
          'key'
                a string indicating the key used to sign this certificate.
          'signature'
                a string indicating the status of the signature. Possible
                values of this string are:
                      'ok'        : the signature is correct
                      'bad'       : the signature is invalid
                      'unknown'   : signature was made with an unknown key
          'name'
                the name of this certificate
          'value'
                the value of this certificate
          'trust'
                is this certificate trusted by the defined trust metric?
                Possible values of this string are:
                      'trusted'   : this certificate is trusted
                      'untrusted' : this certificate is not trusted
     </pre>

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
                key "emile@alumni.reed.edu"
          signature "ok"
               name "author"
              value "emile@alumni.reed.edu"
              trust "trusted"
          
                key "emile@alumni.reed.edu"
          signature "ok"
               name "branch"
              value "net.venge.monotone"
              trust "trusted"
          
                key "emile@alumni.reed.edu"
          signature "ok"
               name "changelog"
              value "propagate from branch 'net.venge.monotone.annotate' (head 76a886ef7c8ae12a4bba5fc2bd252557bf863aff)
                      to branch 'net.venge.monotone' (head 2490479a4e4e99243fead6d627d78291fde592f0)
          "
              trust "trusted"
          
                key "emile@alumni.reed.edu"
          signature "ok"
               name "date"
              value "2005-05-20T20:19:25"
              trust "trusted"
     </pre>

          <br><dt><strong>Output format:</strong><dd>
All stanzas are formatted by basic_io. Stanzas are separated
by a blank line. Values will be escaped, '\' to '\\' and
'"' to '\"'.

          <br><dt><strong>Error conditions:</strong><dd>
If a certificate is signed with an unknown public key, a
warning message is printed to stderr. If the revision specified is unknown
or invalid prints an error message to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate stdio</span></samp><a name="index-mtn-automate-stdio-158"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
none

          <br><dt><strong>Changes:</strong><dd>
               <ul>
<li>3.1 &ndash; Added the 'o' item to the recognized input. This change should not
break anything. 
<li>1.0 &ndash; Initial version. 
</ul>

          <br><dt><strong>Purpose:</strong><dd>
Allow multiple automate commands to be run from one instance of monotone.

          <br><dt><strong>Sample input:</strong><dd>
<pre class="verbatim">          
          l6:leavese
          l7:parents40:0e3171212f34839c2e3263e7282cdeea22fc5378e
          o3:key11:foo@bar.come l4:cert40:0e3171212f34839c2e3263e7282cdeea22fc53783:foo3:bare
     </pre>

          <br><dt><strong>Input format:</strong><dd>
<pre class="verbatim">          
          [ 'o' &lt;string> &lt;string> [ &lt;string> &lt;string> [ ... ] ] 'e' ]
          'l' &lt;string> [ &lt;string> [ ... ] ] 'e'
     </pre>

          <p>The input is a series of commands. The command name plus arguments are
provided as 'l' &lt;string&gt; [&lt;string&gt; ...] 'e', where &lt;string&gt; = &lt;size&gt; colon
&lt;data&gt; . This may optionally be preceded by a set of key=value pairs
(command options) as 'o' &lt;string&gt; &lt;string&gt; [&lt;string&gt; &lt;string&gt; ...] 'e', where
strings come in pairs, key followed by value. For flag options that
don't take values, specify the second string as zero length; <code>0:</code>.

          <p>The space between the ending 'e' of one group of strings and the beginning
'l' or 'o' of the next is reserved. Any characters other than whitespace
will cause an error.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          0:0:l:205:0e3171212f34839c2e3263e7282cdeea22fc5378
          1f4ef73c3e056883c6a5ff66728dd764557db5e6
          2133c52680aa2492b18ed902bdef7e083464c0b8
          23501f8afd1f9ee037019765309b0f8428567f8a
          2c295fcf5fe20301557b9b3a5b4d437b5ab8ec8c
          1:0:l:41:7706a422ccad41621c958affa999b1a1dd644e79
     </pre>

          <br><dt><strong>Output format:</strong><dd>
The output consists of one or more packets for each command. 
A packet looks like:

          <p>&lt;command number&gt;:&lt;err code&gt;:&lt;last?&gt;:&lt;size&gt;:&lt;output&gt;

          <p>&lt;command number&gt; is a decimal number specifying which command this output
is from. It is 0 for the first command, and increases by one each time.

          <p>&lt;err code&gt; is 0 for success, 1 for a syntax error, and 2 for any other error.

          <p>&lt;last?&gt; is 'l' if this is the last piece of output for this command, and 'm'
if there is more output to come.

          <p>&lt;size&gt; is the number of bytes in the output.

          <p>&lt;output&gt; is a piece of the output of the command.

          <p>All but the last packet for a given command will have the
&lt;last?&gt; field set to 'm'.

          <br><dt><strong>Error conditions:</strong><dd>
If a badly formatted or invalid command is received, or a command is
given with invalid arguments or options, prints an error message to
standard error and exits with nonzero status. Errors in the commands run
through this interface do not affect the exit status. Instead, the &lt;err code&gt;
field in the output is set to 2, and the output of the command becomes
whatever error message would have been given.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_revision </span><var>id</var></samp><a name="index-mtn-automate-get_005frevision-_0040var_007bid_007d-159"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The argument <var>id</var> specifies the revision id for which the changeset
information should be printed.

          <br><dt><strong>Added in:</strong><dd>
1.0

          <br><dt><strong>Changed in:</strong><dd>
7.0 (<var>id</var> is now mandatory)

          <br><dt><strong>Purpose:</strong><dd>
Prints change information for the specified revision id.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          format_version "1"
          
          new_manifest [bfe2df785c07bebeb369e537116ab9bb7a4b5e19]
          
          old_revision [429fea55e9e819a046843f618d90674486695745]
          
          patch "ChangeLog"
           from [7dc21d3a46c6ecd94685ab21e67b131b32002f12]
             to [234513e3838d423b24d5d6c98f70ce995c8bab6e]
          
          patch "std_hooks.lua"
           from [0408707bb6b97eae7f8da61af7b35364dbd5a189]
             to [d7bd0756c48ace573926197709e53eb24dae5f5f]
     </pre>

          <br><dt><strong>Output format:</strong><dd>
There are several changes that are described; each of these is described by
a different basic_io stanza. The first string pair of each stanza indicates the
type of change represented.

          <p>All stanzas are formatted by basic_io. Stanzas are separated
by a blank line. Values will be escaped, '\' to '\\' and
'"' to '\"'.

          <p>Possible values of this first value are along with an ordered list of
basic_io formatted stanzas that will be provided are:

          <pre class="verbatim">          
          'format_version'
                used in case this format ever needs to change.
                format: ('format_version', the string "1")
                occurs: exactly once
          'new_manifest'
                represents the new manifest associated with the revision.
                format: ('new_manifest', manifest id)
                occurs: exactly one
          'old_revision'
                represents a parent revision.
                format: ('old_revision', revision id)
                occurs: either one or two times
          'delete
                represents a file or directory that was deleted.
                format: ('delete', path)
                occurs: zero or more times
          'rename'
                represents a file or directory that was renamed.
                format: ('rename, old filename), ('to', new filename)
                occurs: zero or more times
          'add_dir'
                represents a directory that was added.
                format: ('add_dir, path)
                occurs: zero or more times
          'add_file'
                represents a file that was added.
                format: ('add_file', path), ('content', file id)
                occurs: zero or more times
          'patch'
                represents a file that was modified.
                format: ('patch', filename), ('from', file id), ('to', file id)
                occurs: zero or more times
          'clear'
                represents an attr that was removed.
                format: ('clear', filename), ('attr', attr name)
                occurs: zero or more times
          'set'
                represents an attr whose value was changed.
                format: ('set', filename), ('attr', attr name), ('value', attr value)
                occurs: zero or more times
     </pre>

          <p>These stanzas will always occur in the order listed here; stanzas of
the same type will be sorted by the filename they refer to. The 'delete'
and following stanzas will be grouped under the corresponding 'old_revision'
one.

          <br><dt><strong>Error conditions:</strong><dd>
If the revision specified is unknown or invalid prints an error message
to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_current_revision [--exclude </span><var>excl</var><span class="command">] [--depth=</span><var>depth</var><span class="command">] [</span><var>path</var><span class="command"> ...]</span></samp><a name="index-mtn-automate-get_005fcurrent_005frevision-_005b_002d_002dexclude-_0040var_007bexcl_007d_005d-_005b_002d_002ddepth_003d_0040var_007bdepth_007d_005d-_005b_0040var_007bpath_007d-_002e_002e_002e_005d-160"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One or more <var>path</var> arguments restrict the revision to these paths,
otherwise all changes in workspace are taken into account.

          <p>Options <var>excl</var> and <var>depth</var> work just like in <var>mtn commit</var>.

          <br><dt><strong>Added in:</strong><dd>
7.0

          <br><dt><strong>Purpose:</strong><dd>
Prints change information for the current workspace, optionally restricted by
one or more paths.

          <br><dt><strong>Sample output:</strong><dd>
See <var>automate get_revision</var>

          <br><dt><strong>Output format:</strong><dd>
See <var>automate get_revision</var>

          <br><dt><strong>Error conditions:</strong><dd>
If the command is executed outside of a workspace, there are no changes in the
current workspace or the restriction is invalid or has no recorded changes,
prints an error message to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_base_revision_id</span></samp><a name="index-mtn-automate-get_005fbase_005frevision_005fid-161"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
2.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the revision id the current workspace is based on. This is the
&ldquo;old_revision&rdquo; value stored in <samp><span class="file">_MTN/revision</span></samp>.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
     </pre>

          <br><dt><strong>Output format:</strong><dd>
One line containing the base revision ID of the current workspace.

          <br><dt><strong>Error conditions:</strong><dd>
If no workspace book keeping _MTN directory is found, prints an error
message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_current_revision_id</span></samp><a name="index-mtn-automate-get_005fcurrent_005frevision_005fid-162"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
2.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the revision id of the current workspace. This is the id
of the revision that would be committed by an unrestricted commit
in the workspace.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          28ce076c69eadb9b1ca7bdf9d40ce95fe2f29b61
     </pre>

          <br><dt><strong>Output format:</strong><dd>
One line containing the current revision id ID of the current workspace.

          <br><dt><strong>Error conditions:</strong><dd>
If no workspace book keeping _MTN directory is found, prints an error
message to stderr, and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_manifest_of</span></samp><a name="index-mtn-automate-get_005fmanifest_005fof-163"></a><br><dt><samp><span class="command">mtn automate get_manifest_of </span><var>revid</var></samp><a name="index-mtn-automate-get_005fmanifest_005fof-_0040var_007brevid_007d-164"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
Specifying the optional <var>revid</var> argument outputs the manifest for the
revision with the specified ID. Otherwise, outputs the manifest for the
current workspace.  (You can think of leaving the argument blank
as meaning &ldquo;give me the manifest of THIS&rdquo;.)

          <br><dt><strong>Added in:</strong><dd>
2.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the contents of the manifest associated with the given roster.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          format_version "1"
          
          dir ""
          
             file ".htaccess"
          content [e3915658cb464d05f21332e03d30dca5d94fe776]
          
             file "AUTHORS"
          content [80d8f3f75c9b517ec462233e155f7dfb93379f67]
          
             file "ChangeLog"
          content [fc74a48c7f73eedcbe1ea709755fbe819b29736c]
          
             file "LICENSE"
          content [dfac199a7539a404407098a2541b9482279f690d]
          
             file "README"
          content [440eec971e7bb61ccbb61634deb2729bb25931cd]
          
             file "TODO"
          content [e0ea26c666b37c5f98ccf80cb933d021ee55c593]
          
             file "branch.psp"
          content [b28ece354969314ce996f3030569215d685973d6]
          
             file "common.py"
          content [1fdb62e05fb2a9338d2c72ddc58de3ab2b3976fe]
          
             file "config.py.example"
          content [64cb5898e3a026b4782c343ca4386585e0c3c275]
          
             file "error.psp"
          content [7152c3ff110418aca5d23c374ea9fb92a0e98379]
          
             file "fileinbranch.psp"
          content [5d8536100fdf51d505b6f20bc9c16aa78d4e86a8]
          
             file "headofbranch.psp"
          content [981df124a0b5655a9f78c42504cfa8c6f02b267a]
          
             file "help.psp"
          content [a43d0588a69e622b2afc681678c2a5c3b3b1f342]
          
             file "html.py"
          content [18a8bffc8729d7bfd71d2e0cb35a1aed1854fa74]
          
             file "index.psp"
          content [c621827db187839e1a7c6e51d5f1a7f6e0aa560c]
          
             file "monotone.py"
          content [708b61436dce59f47bd07397ce96a1cfabe81970]
          
             file "revision.psp"
          content [a02b1c161006840ea8685e461fd07f0e9bb145a3]
          
             file "rss_feed.gif"
          content [027515fd4558abf317d54c437b83ec6bc76e3dd8]
          
             file "tags.psp"
          content [638140d6823eee5844de37d985773be75707fa25]
          
             file "tarofbranch.psp"
          content [be83f459a152ffd49d89d69555f870291bc85311]
          
             file "test.py"
          content [e65aace9237833ec775253cfde97f59a0af5bc3d]
             attr "mtn:execute" "true"
          
             file "utility.py"
          content [fb51955563d64e628e0e67e4acca1a1abc4cd989]
          
             file "viewmtn.css"
          content [8d04b3fc352a860b0e3240dcb539c1193705398f]
          
             file "viewmtn.py"
          content [7cb5c6b1b1710bf2c0fa41e9631ae43b03424a35]
          
             file "wrapper.py"
          content [530290467a99ca65f87b74f653bf462b28c6cda9]
     </pre>

          <br><dt><strong>Output format:</strong><dd>
There is one basic_io stanza for each file or directory in the
manifest.

          <p>All stanzas are formatted by basic_io. Stanzas are separated
by a blank line. Values will be escaped, '\' to '\\' and
'"' to '\"'.

          <p>Possible values of this first value are along with an ordered list of
basic_io formatted stanzas that will be provided are:

          <pre class="verbatim">          
          'format_version'
                used in case this format ever needs to change.
                format: ('format_version', the string "1")
                occurs: exactly once
          'dir':
                represents a directory.  The path "" (the empty string) is used
                to represent the root of the tree.
                format: ('dir', pathname)
                occurs: one or more times
          'file':
                represents a file.
                format: ('file', pathname), ('content', file id)
                occurs: zero or more times
     </pre>

          <p>In addition, 'dir' and 'file' stanzas may have attr information
included.  These are appended to the stanza below the basic dir/file
information, with one line describing each attr.  These lines take the
form ('attr', attr name, attr value).

          <p>Stanzas are sorted by the path string.

          <br><dt><strong>Error conditions:</strong><dd>
If the revision ID specified is unknown or invalid prints an error
message to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_attributes </span><var>path</var></samp><a name="index-mtn-automate-get_005fattributes-_0040var_007bpath_007d-165"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The argument <var>path</var> determines which path's attributes should be printed.

          <br><dt><strong>Added in:</strong><dd>
3.0

          <br><dt><strong>Renamed from <samp></strong><span class="command">attributes</span><strong></samp> to <samp></strong><span class="command">get_attributes</span><strong></samp> in:</strong><dd>
5.0

          <br><dt><strong>Purpose:</strong><dd>
Prints all attributes of the given file and the attribute states.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          format_version "1"
          
           attr "foo" "bar"
          state "added"
          
           attr "baz" "bat"
          state "dropped"
          
           attr "foobar" "foobat"
          state "unchanged"
     </pre>

          <br><dt><strong>Output format:</strong><dd>
There is one basic_io stanza for each attribute of the given file.

          <p>All stanzas are formatted by basic_io. Stanzas are separated
by a blank line and ordered by attribute name. Values will be
escaped, '\' to '\\' and '"' to '\"'.

          <p>Each attribute stanza also contains another entry which tells the status
of attribute. This entry can have one of the following four values:

               <ul>
<li>'added': the attribute has just been added to the file
<li>'dropped': the attribute has just been dropped from the file
<li>'unchanged': the attribute has not been changed since the last revision
<li>'changed': the attribute has been changed since the last revision
</ul>

          <p>The status 'changed' can come up if an attribute foo has been dropped and
added afterwards with another value, like

          <pre class="verbatim">          
          $ mtn attr drop file.txt foo ; mtn attr set file.txt foo baz
     </pre>

          <p>If an attribute has been dropped, the output will still return the previously
set value of the dropped attribute for convenience (obviously this is no longer
recorded in the current workspace).

          <p>The complete format:

          <pre class="verbatim">          
          'format_version'
                used in case this format ever needs to change.
                format: ('format_version', the string "1")
                occurs: exactly once
          'attr':
                represents an attribute.
                format: ('attr', key, value), ('state', [unchanged|changed|added|dropped])
                occurs: zero or more times
     </pre>

          <br><dt><strong>Error conditions:</strong><dd>
If the path specified is unknown in the new workspace revision, prints an error
message to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate set_attribute </span><var>path</var> <var>key</var> <var>value</var></samp><a name="index-mtn-automate-set_005fattribute-_0040var_007bpath_007d-_0040var_007bkey_007d-_0040var_007bvalue_007d-166"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
A path, an attribute key and an attribute value.

          <br><dt><strong>Added in:</strong><dd>
5.0

          <br><dt><strong>Purpose:</strong><dd>
Edits the current workspace revision and inserts the given attribute key and
value for the specified path. Note that this change is not committed and
therefor behaves exactly like <samp><span class="command">mtn attr set </span><var>key</var> <var>value</var></samp>.

          <br><dt><strong>Output format:</strong><dd>
This command does not print out anything if successful.

          <br><dt><strong>Error conditions:</strong><dd>
If the path specified is unknown in the new workspace revision, prints an error
message to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate drop_attribute </span><var>path</var><span class="command"> [</span><var>key</var><span class="command">]</span></samp><a name="index-mtn-automate-drop_005fattribute-_0040var_007bpath_007d-_005b_0040var_007bkey_007d_005d-167"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
A path and an attribute key (optional).

          <br><dt><strong>Added in:</strong><dd>
5.0

          <br><dt><strong>Purpose:</strong><dd>
Removes an attribute from the current workspace revision for the specified path. 
If no attribute key is given, all attributes of this path are removed. Note that
this change is not committed and therefor behaves exactly like
<samp><span class="command">mtn attr drop </span><var>path</var><span class="command"> [</span><var>key</var><span class="command">]</span></samp>.

          <br><dt><strong>Output format:</strong><dd>
This command does not print out anything if successful.

          <br><dt><strong>Error conditions:</strong><dd>
If the path specified is unknown in the new workspace revision or the attribute
key is not found for this path, prints an error message to stderr and exits with
status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate content_diff [--revision=</span><var>id1</var><span class="command"> [--revision=</span><var>id2</var><span class="command">]] [</span><var>files</var><span class="command"> ...]</span></samp><a name="index-mtn-automate-content_005fdiff-_005b_002d_002drevision_003d_0040var_007bid1_007d-_005b_002d_002drevision_003d_0040var_007bid2_007d_005d_005d-_005b_0040var_007bfiles_007d-_002e_002e_002e_005d-168"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
One or more <var>file</var> arguments restrict the diff output to these files,
otherwise all changed files in the given revision(s) and/or current workspace
are considered.

          <p>If zero or more revisions are given, the command behaves as follows:

               <ul>
<li>no revision: the diff is done between the workspace revision and the
parent (base) revision of this workspace
<li>one revision: the diff is done between the workspace revision and the
given revision <samp><span class="option">id1</span></samp>,
<li>two revisions: the diff is done between <samp><span class="option">id1</span></samp> and <samp><span class="option">id2</span></samp>; no
workspace is needed in this case. 
</ul>

          <br><dt><strong>Added in:</strong><dd>
4.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the content changes between two revisions or a revision and the current
workspace. This command differs from <samp><span class="command">mtn diff</span></samp> in that way that it only
outputs content changes and keeps quite on renames or drops, as the header of
<samp><span class="command">mtn diff</span></samp> is omitted (this is what <samp><span class="command">mtn automate get_revision</span></samp>
already provides).

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          ============================================================
          --- guitone/res/i18n/guitone_de.ts      9857927823e1d6a0339b531c120dcaadd22d25e9
          +++ guitone/res/i18n/guitone_de.ts      0b4715dc296b1955b0707923d45d79ca7769dd3f
          @@ -1,6 +1,14 @@
           &lt;?xml version="1.0" encoding="utf-8"?>
           &lt;!DOCTYPE TS>&lt;TS version="1.1">
           &lt;context>
          +    &lt;name>AncestryGraph&lt;/name>
          +    &lt;message>
          [...]
     </pre>

          <br><dt><strong>Output format:</strong><dd>
The GNU unified diff format. If there have been no content changes, the output
is empty.

          <br><dt><strong>Error conditions:</strong><dd>
If more than two revisions are given or a workspace is required, but
not found, prints to stderr and exits with status 1. If one or more file
restrictions can't be applied, the command prints to stderr and exits as well.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_file </span><var>id</var></samp><a name="index-mtn-automate-get_005ffile-_0040var_007bid_007d-169"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The  <var>id</var> argument specifies the file hash of the file to be output.

          <br><dt><strong>Added in:</strong><dd>
1.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the contents of the specified file.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          If you've downloaded a release, see INSTALL for installation
          instructions.  If you've checked this out, the generated files are not
          included, and you must use "autoreconf --install" to create them.
          
          "make html" for docs, or read the .info file and / or man page.
     </pre>

          <br><dt><strong>Output format:</strong><dd>
The file contents are output without modification.

          <br><dt><strong>Error conditions:</strong><dd>
If the file id specified is unknown or invalid prints an error message
to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_file_of </span><var>filename</var><span class="command"> [--revision=</span><var>id</var><span class="command">]</span></samp><a name="index-mtn-automate-get_005ffile_005fof-_0040var_007bfilename_007d-_005b_002d_002drevision_003d_0040var_007bid_007d_005d-170"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The  <var>filename</var> argument specifies the filename of the file to be output.

          <p>If a revision <var>id</var> is given, the file's contents in that specific revision
are printed. If no revision is given, the workspace's revision is used.

          <br><dt><strong>Added in:</strong><dd>
4.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the contents of the specified file.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          If you've downloaded a release, see INSTALL for installation
          instructions.  If you've checked this out, the generated files are not
          included, and you must use "autoreconf --install" to create them.
          
          "make html" for docs, or read the .info file and / or man page.
     </pre>

          <br><dt><strong>Output format:</strong><dd>
The file contents are output without modification.

          <br><dt><strong>Error conditions:</strong><dd>
If the filename specified is unknown in the given revision or invalid, or
if the given revision is unknown, prints an error message to stderr and exits
with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_option </span><var>option</var></samp><a name="index-mtn-automate-get_005foption-_0040var_007boption_007d-171"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>option</var> argument specifies the option name of the option to be output.

          <br><dt><strong>Added in:</strong><dd>
3.1

          <br><dt><strong>Purpose:</strong><dd>
Prints an option from _MTN/option of the current workspace.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          net.venge.monotone
     </pre>

          <br><dt><strong>Output format:</strong><dd>
The option value is written out without modification.

          <br><dt><strong>Error conditions:</strong><dd>
If the option is unknown, prints an error message to stderr and exits
with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate keys</span></samp><a name="index-mtn-automate-keys-172"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
1.1

          <br><dt><strong>Purpose:</strong><dd>
Print all keys in basic_io format.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
                      name "tbrownaw@gmail.com"
               public_hash [475055ec71ad48f5dfaf875b0fea597b5cbbee64]
              private_hash [7f76dae3f91bb48f80f1871856d9d519770b7f8a]
           public_location "database" "keystore"
          private_location "keystore"
          
                     name "tomfa@debian.org"
              public_hash [3ac4afcd86af28413b0a23b7d22b9401e15027fc]
          public_location "database"
          
                      name "underwater@fishtank.net"
               public_hash [115fdc73d87a5e9901d018462b21a1f53eca33a1]
              private_hash [b520d2cfe7d30e4ea1725fc4f34646fc5469b13d]
           public_location "keystore"
          private_location "keystore"
          
     </pre>

          <br><dt><strong>Output format:</strong><dd>
For each key, a basic_io stanza is printed. The public_location and
private_location items may have multiple values as shown above for public_location, one value for each place that the key is stored. If the
private key does not exist, then the private_hash and private_location
items will be absent. The keys are ordered alphabetically by name.

          <br><dt><strong>Error conditions:</strong><dd>
None.

     </dl>

     <br><dt><samp><span class="command">mtn automate packet_for_rdata </span><var>id</var></samp><a name="index-mtn-automate-packet_005ffor_005frdata-_0040var_007bid_007d-173"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>id</var> specifies the revision to output an rdata packet for.

          <br><dt><strong>Added in:</strong><dd>
2.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the revision data in packet format

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          [rdata bdf3b10b5df0f17cc6c1b4b3351d84701bda59ed]
          H4sIAAAAAAAA/0XQS27DMAwE0L1PIfgArb4kte62NzACg5SoJEBsF7aRurev0UVzgJl5mLas
          E+/jU9ftvsymd33Xzfo9Tjzfm267GSgGwVarz6Valx0KtFYwii9VqUFCqJQ5X7puedRx1ef9
          r2rwHlSbi+BUSrF4xn1p0RInkmxTbmwREp/BL97LzfQfN56v+rlc+860dZnMED01jhILkURJ
          Ul0KPpGN1ueUwDHyiXF66Ywx+2IGD+0Uqg8aCzikAEzZNRXPmJKlkhMxSHuNzrofx/uq2/J4
          6njV/bZsu/zMPOlbOY4XJSD5KOrwXGdwpDGdfotZayQHKTAi5fRPqUWKcAMMIQfAjOK0nkfm
          6tFacjYgBPV46X4BtlpiNYUBAAA=
          [end]
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Revision data in <samp><span class="command">monotone read</span></samp> compatible packet format.

          <br><dt><strong>Error conditions:</strong><dd>
If <var>id</var> is unknown or invalid prints an error message to stderr
and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate packet_for_certs </span><var>id</var></samp><a name="index-mtn-automate-packet_005ffor_005fcerts-_0040var_007bid_007d-174"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>id</var> specifies the revision to output cert packets for.

          <br><dt><strong>Added in:</strong><dd>
2.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the certs associated with a revision in packet format

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          [rcert bdf3b10b5df0f17cc6c1b4b3351d84701bda59ed
                 branch
                 njs@pobox.com
                 bmV0LnZlbmdlLm1vbm90b25l]
          K90i1XHHmaMEMuwbPifFweLThJl0m7jigh2Qq6Z7TBwNJ6IMOjXWCizv73cacZ1CtzxFDVwQ
          SlqhNWiPQWxdcMp+Uuo+V8IFMKmvxVSTuVDukLMuNAQqpGL5S+a+tEj68NMq+KLKuL8kAAPc
          RoFD7GQlTS35S3RHWA4cnvqn+8U=
          [end]
          [rcert bdf3b10b5df0f17cc6c1b4b3351d84701bda59ed
                 date
                 njs@pobox.com
                 MjAwNi0wNC0wOFQxMTo1MDowMA==]
          araz9A8x6AlK6m6UhwnhUhk7cdyxeE2nvzj2gwaDvkaBxOq4SN23/wnaPqUXx1Ddn8smzyRY
          HN08xloYc0yNChp3wjbqx20REcsTg3XE4rN/sgCbqqw5hVT22a5ZhqkfkDeoeJvan0R0UBax
          ngKYo9eLuABNlmFX2onca75JW1E=
          [end]
          [rcert bdf3b10b5df0f17cc6c1b4b3351d84701bda59ed
                 author
                 njs@pobox.com
                 bmpzQHBvYm94LmNvbQ==]
          BLPOYhgLsAN+w7CwOsv9GfXnG3u7RNF1DTrWdn0AnYE1e+ptgTeMVWUI18H4OGL0B7wm08rv
          Pxk/hvsb8fBn1Kf5HDDO2pbjJ0xVzI9+p+TR0y5jJNZlVSTj+nvtPgvK9NzsdooYWnwlWmJv
          bOkAzQcZb8NMh8pbQkdHbR5uzMo=
          [end]
          [rcert bdf3b10b5df0f17cc6c1b4b3351d84701bda59ed
                 changelog
                 njs@pobox.com
                 MjAwNi0wNC0wOCAgTmF0aGFuaWVsIFNtaXRoICA8bmpzQHBvYm94LmNvbT4KCgkqIG5ldHh4
          L3Jlc29sdmVfZ2V0aG9zdGJ5bmFtZS5jeHggKHJlc29sdmVfaG9zdG5hbWUpOiAjaWZkZWYg
          b3V0CglXaW4zMi1pbmNvbXBhdGlibGUgZXJyb3IgcmVwb3J0aW5nIGNhbGwuCg==]
          Ncl4L/oEPctzVQixTKA6FrLceeHnLiXfeyeFDNmtUFYg9BMUcjWkeyKmaWknLvOcHortxjto
          K6pQ9E8S7zI+TpzFAhssg5a///rFL0+2GJU3t6pcHs6LC0Q4tbqzwKd/5+8GwT1gphbM1wm7
          KuzKthwqD3pp49GbgTrp8iWMTr0=
          [end]
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Cert data in <samp><span class="command">monotone read</span></samp> compatible packet format.

          <br><dt><strong>Error conditions:</strong><dd>
If <var>id</var> is unknown or invalid prints an error message to stderr
and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate packet_for_fdata </span><var>id</var></samp><a name="index-mtn-automate-packet_005ffor_005ffdata-_0040var_007bid_007d-175"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>id</var> specifies the file to output an fdata packet for.

          <br><dt><strong>Added in:</strong><dd>
2.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the file data in packet format

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          [fdata 229c7f621b65f7e4970ae5aaec993812b9daa1d4]
          H4sIAAAAAAAA/z2OO27DMBBEe51ioMaNrJzBpQAjTXKBBTW0CJPcgFw6yO1DCkG62Q/em83j
          R9vlRez6naPKzh2CwkipXFBJbO8fn7f7HV4LQq4mMYoFzdMYSnMj1xXY/lnuoHt2kB2hQpst
          PREPZhaxvvchskIKkdU6xsXWvQsk76MOUquGVolZmmmh0+xxvf7JZ5jCFXbU4KZ1muYkT+Kw
          FOez5q6uLuh9+9eoQawhez3Fp+VtHJNkfMmDHfALzWYfcAgBAAA=
          [end]
     </pre>

          <br><dt><strong>Output format:</strong><dd>
File data in <samp><span class="command">monotone read</span></samp> compatible packet format.

          <br><dt><strong>Error conditions:</strong><dd>
If <var>id</var> is unknown or invalid prints an error message to stderr
and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate packet_for_fdelta </span><var>from-id</var> <var>to-id</var></samp><a name="index-mtn-automate-packet_005ffor_005ffdelta-_0040var_007bfrom_002did_007d-_0040var_007bto_002did_007d-176"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>from-id</var> specifies the file to use as the base of the delta,
and <var>to-id</var> specifies the file to use as the target of the delta.

          <br><dt><strong>Added in:</strong><dd>
2.0

          <br><dt><strong>Purpose:</strong><dd>
Prints the file delta in packet format

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          [fdelta 597049a62d0a2e6af7df0b19f4945ec7d6458727
                  229c7f621b65f7e4970ae5aaec993812b9daa1d4]
          H4sIAAAAAAAA/0WOy0oEMRBF9/mKS2/c9LQg4t5lw+BGf6BIKtNhkpSkKop/b9II7m49OOfu
          eHp5dnvEj/SHL0aQ75qFAgcQGmcm5RXKjP3t/eP1ekWUhlTVKGeyJNXNoXU/s27AP8sf7O8D
          ZEdSSLd1JMaNKzeysY8ps4Iao4oNjM99eFdQDbMOSldDV8ZC3aSxlxpxufzJF5jANx6oyS2b
          c0uhO+OwkpezZhCvK0bf8TVrMLZUo5zi0/I4j4UqPunGA+B+AfHvKEIPAQAA
          [end]
     </pre>

          <br><dt><strong>Output format:</strong><dd>
File delta data in <samp><span class="command">monotone read</span></samp> compatible packet format.

          <br><dt><strong>Error conditions:</strong><dd>
If <var>from-id</var> or <var>to-id</var> is unknown or invalid prints an error
message to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_content_changed </span><var>id</var> <var>file</var></samp><a name="index-mtn-automate-get_005fcontent_005fchanged-_0040var_007bid_007d-_0040var_007bfile_007d-177"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>id</var> specifies a revision ID, from which content change calculations will be based. 
and <var>file</var> specifies the file for which to calculate revisions in which it was last changed.

          <br><dt><strong>Added in:</strong><dd>
4.0

          <br><dt><strong>Purpose:</strong><dd>
Returns a list of revision IDs in which the content  was most recently changed, relative to the revision ID specified as <var>id</var>. This equates to a content mark following the *-merge algorithm.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
            content_mark [276264b0b3f1e70fc1835a700e6e61bdbe4c3f2f]
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or more basic_io stanzas, each specifying a revision ID in which a content mark is set.

          <p>The complete format:
<pre class="verbatim">          
          'content_mark'
                   the hexadecimal id of the revision the content mark is attached to
     </pre>

          <br><dt><strong>Error conditions:</strong><dd>
If <var>id</var> or <var>file</var> is unknown or invalid prints an error
message to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_corresponding_path </span><var>source_id</var> <var>file</var> <var>target_id</var></samp><a name="index-mtn-automate-get_005fcorresponding_005fpath-_0040var_007bsource_005fid_007d-_0040var_007bfile_007d-_0040var_007btarget_005fid_007d-178"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>source_id</var> specifies a revision ID in which <var>file</var> is current extant. 
and <var>file</var> specifies the file whose name in <var>target_id</var> is to be determined;
<var>target_id</var> specifies a revision ID.

          <br><dt><strong>Added in:</strong><dd>
4.0

          <br><dt><strong>Purpose:</strong><dd>
Given a the file name <var>file</var> in the source revision <var>source_id</var>, a filename
will if possible be returned naming the file in the target revision <var>target_id</var>. 
This allows the same file to be matched between revisions, accounting
for renames and other changes.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          file "foo"
     </pre>

          <br><dt><strong>Output format:</strong><dd>
Zero or one basic_io stanzas. Zero stanzas will be output if the file does not exist within the target revision; this is not considered an error. If the file does exist in the target revision, a single stanza with the  following details is output.

          <p>The complete format:
<pre class="verbatim">          
             'file'
                   the file name corresponding to "file name" (arg 2) in the target revision
     </pre>

          <br><dt><strong>Error conditions:</strong><dd>
If the revision IDs <var>source_id</var> or <var>target_id</var> are unknown or invalid prints an error
message to stderr and exits with status 1. If the file path <var>file</var> does not exist in the
revision <var>source_id</var> or is invalid, prints an error message to stderr and exits with status
1. Note that <var>file</var> not existing in the revision <var>target_id</var> is not an error.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_db_variables [</span><var>domain</var><span class="command">]</span></samp><a name="index-mtn-automate-get_005fdb_005fvariables-_005b_0040var_007bdomain_007d_005d-179"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The optional <var>domain</var> restricts the output to variables only within
this domain.

          <br><dt><strong>Changes:</strong><dd>
               <ul>
<li>7.0 &ndash; converted output to basic_io, renamed to 'get_db_variables'
<li>4.1 &ndash; added as 'db_get'
</ul>

          <br><dt><strong>Purpose:</strong><dd>
Reads and outputs database variables. For more information about variables,
see <a href="Vars.html#Vars">Vars</a>.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          domain "database"
           entry "default-exclude-pattern" ""
           entry "default-include-pattern" "net.venge.monotone*"
           entry "default-server" "monotone.ca"
          
          domain "known-servers"
           entry "monotone.ca" "3e6f5225bc2fffacbc20c9de37ff2dae1e20892e"
           entry "monotone.mtn-host.prjek.net" "a52f85615cb2445989f525bf17a603250381a751"
           entry "venge.net" "70a0f283898a18815a83df37c902e5f1492e9aa2"
     </pre>

          <br><dt><strong>Output format:</strong><dd>
basic_io-formatted stanzas. Each stanza starts with a 'domain', followed by one
or more 'entry' lines. Each 'entry' contains the <var>name</var> and the <var>value</var>
of the respective database variable.

          <br><dt><strong>Error conditions:</strong><dd>
If the domain is unknown or no variables where found, prints an error message
to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate set_db_variable </span><var>domain</var> <var>name</var> <var>value</var></samp><a name="index-mtn-automate-set_005fdb_005fvariable-_0040var_007bdomain_007d-_0040var_007bname_007d-_0040var_007bvalue_007d-180"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>domain</var> and <var>name</var> specify the database variable
which is changed to <var>value</var>.

          <br><dt><strong>Changes:</strong><dd>
               <ul>
<li>7.0 &ndash; renamed to 'set_db_variable'
<li>4.1 &ndash; added as 'db_set'
</ul>

          <br><dt><strong>Purpose:</strong><dd>
Change a database variable, see also <a href="Vars.html#Vars">Vars</a>.

          <br><dt><strong>Sample usage:</strong><dd>
<pre class="verbatim">          
          mtn automate set_db_variable database default-server off.net
     </pre>

          <br><dt><strong>Output format:</strong><dd>
No output.

          <br><dt><strong>Error conditions:</strong><dd>
None.

     </dl>

     <br><dt><samp><span class="command">mtn automate drop_db_variables </span><var>domain</var><span class="command"> [</span><var>name</var><span class="command">]</span></samp><a name="index-mtn-automate-drop_005fdb_005fvariables-_0040var_007bdomain_007d-_005b_0040var_007bname_007d_005d-181"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The <var>domain</var> and <var>name</var> specify the database variable
which should be dropped. If <var>name</var> is ommitted, all database
variables in the <var>domain</var> are dropped.

          <br><dt><strong>Added in:</strong><dd>
7.0

          <br><dt><strong>Purpose:</strong><dd>
Drops one or more database variables, see also <a href="Vars.html#Vars">Vars</a>.

          <br><dt><strong>Sample usage:</strong><dd>
<pre class="verbatim">          
          mtn automate drop_db_variables known-servers
     </pre>

          <br><dt><strong>Output format:</strong><dd>
No output.

          <br><dt><strong>Error conditions:</strong><dd>
If the specific variable or any variables in the given domain are not found,
prints to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate put_file [</span><var>base-id</var><span class="command">] </span><var>contents</var></samp><a name="index-mtn-automate-put_005ffile-_005b_0040var_007bbase_002did_007d_005d-_0040var_007bcontents_007d-182"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
The optional <var>base-id</var> specifies a file-id on which the contents are
based on. This is used for delta encoding. <var>contents</var> are the contents of
the new file.

          <br><dt><strong>Added in:</strong><dd>
4.1

          <br><dt><strong>Purpose:</strong><dd>
Preparation of a workspace-less commit. 
See also <samp><span class="command">automate put_revision</span></samp>. Normally used via
<samp><span class="command">automate stdio</span></samp>.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          70a0f283898a18815a83df37c902e5f1492e9aa2
     </pre>

          <br><dt><strong>Output format:</strong><dd>
The sha1 sum of the contents, hex encoded.

          <br><dt><strong>Error conditions:</strong><dd>
If the optional base id is unknown prints an error message to stderr and
exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate put_revision </span><var>revision-data</var></samp><a name="index-mtn-automate-put_005frevision-_0040var_007brevision_002ddata_007d-183"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
<var>revision-data</var> is the new revision. See example below.  Note that
the new_manifest entry is ignored &ndash; <samp><span class="command">put_revision</span></samp> will
ignore whatever you put here and calculate the correct manifest id
itself.  (However, for now, you must put 40 hex digits here &ndash; it's
just that which particular digits you put are entirely irrelevant. 
All zeros is a good choice.)  Monotone will also canonicalize your
whitespace automatically.  You do not need to worry about getting just
the right amount of indentation in front of each line.  However,
everything else about your revision must be valid.

          <br><dt><strong>Added in:</strong><dd>
4.1

          <br><dt><strong>Purpose:</strong><dd>
Workspace-less commit. Normally used via <samp><span class="command">automate stdio</span></samp>.

          <br><dt><strong>Sample argument:</strong><dd>
          <pre class="smallexample">               format_version "1"
               
               new_manifest [0000000000000000000000000000000000000004]
               
               old_revision []
               
               add_dir ""
               
               add_file "foo"
               content [5bf1fd927dfb8679496a2e6cf00cbe50c1c87145]
          </pre>
          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          4c2c1d846fa561601254200918fba1fd71e6795d
     </pre>

          <br><dt><strong>Output format:</strong><dd>
The new revision id, hex encoded.

          <br><dt><strong>Error conditions:</strong><dd>
If the changeset is invalid prints an error message to stderr and
exits with status 1. May abort on invalid formats.  If the revision is
already present in the database, prints a message to stderr noting
this fact, but otherwise works as normal.

     </dl>

     <br><dt><samp><span class="command">mtn automate cert </span><var>revision</var> <var>name</var> <var>value</var></samp><a name="index-mtn-automate-cert-_0040var_007brevision_007d-_0040var_007bname_007d-_0040var_007bvalue_007d-184"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
<var>revision</var> is an existing revision, <var>name</var> is the certificate name
and <var>value</var> its value.

          <br><dt><strong>Added in:</strong><dd>
4.1

          <br><dt><strong>Purpose:</strong><dd>
<samp><span class="command">automate stdio</span></samp> capable variant of <samp><span class="command">mtn cert</span></samp>. To sign the
cert with a specific private key, use <samp><span class="option">--key</span></samp>.

          <br><dt><strong>Sample usage:</strong><dd>
<pre class="verbatim">          
          mtn automate cert 4c2c1d846fa561601254200918fba1fd71e6795d author tester@test.net
     </pre>

          <br><dt><strong>Output format:</strong><dd>
No output.

          <br><dt><strong>Error conditions:</strong><dd>
If the revision is invalid prints an error message to stderr and
exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate show_conflicts [</span><var>&ndash;branch BRANCH</var><span class="command">] [</span><var>left_rev right_rev</var><span class="command">]</span></samp><a name="index-mtn-automate-show_005fconflicts-_005b_0040var_007b_002d_002dbranch-BRANCH_007d_005d-_005b_0040var_007bleft_005frev-right_005frev_007d_005d-185"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
Optional left and right revision ids.

          <p>If no revs are given, they default to the first two heads that would
be chosen by the <samp><span class="command">merge</span></samp> command for the current branch. If no
workspace is present, the branch may be given by the <var>&ndash;branch</var>
option.

          <br><dt><strong>Added in:</strong><dd>
7.1

          <br><dt><strong>Purpose:</strong><dd>
Show all conflicts between two revisions.

          <p>This is intended to be used before a <samp><span class="command">merge</span></samp>; an external tool
can guide the user thru resolving each conflict in turn, then do the
merge.

          <p>For more information on conflicts, <a href="Merge-Conflicts.html#Merge-Conflicts">Merge Conflicts</a>.

          <p>Note that this cannot be used to show conflicts that would occur in an
<samp><span class="command">update</span></samp>, since in that case one revision is the workspace.

          <br><dt><strong>Sample output:</strong><dd>
The output starts by listing the revisions and their common ancestor:
<pre class="verbatim">          
              left [532ab5011ea9e64aa212d4ea52363b1b8133d5ba]
             right [b94a03a922c2c281a88d8988db64e76a32edb6a1]
          ancestor [ead03530f5fefe50c9010157c42c0ebe18086559]
     </pre>

          <p>Attribute changed in both branches, or dropped in one:
<pre class="verbatim">          
                  conflict attribute
                 node_type "file"
                 attr_name "attr1"
             ancestor_name "foo"
          ancestor_file_id [bab2022ff2ed13501a8a83bcc6bd53f5042141be]
                 left_name "foo"
              left_file_id [bab2022ff2ed13501a8a83bcc6bd53f5042141be]
           left_attr_value "valueX"
                right_name "foo"
             right_file_id [bab2022ff2ed13501a8a83bcc6bd53f5042141be]
          right_attr_value "valueZ"
          
                  conflict attribute
                 node_type "file"
                 attr_name "attr2"
             ancestor_name "foo"
          ancestor_file_id [bab2022ff2ed13501a8a83bcc6bd53f5042141be]
                 left_name "foo"
              left_file_id [bab2022ff2ed13501a8a83bcc6bd53f5042141be]
           left_attr_value "valueY"
                right_name "foo"
             right_file_id [bab2022ff2ed13501a8a83bcc6bd53f5042141be]
          right_attr_state "dropped"
     </pre>

          <p>Missing root directory:
<pre class="verbatim">          
               conflict missing_root
              left_type "pivoted root"
          ancestor_name "foo"
             right_type "deleted directory"
          ancestor_name "foo"
     </pre>

          <p>Directory deleted and/or renamed:
<pre class="verbatim">          
               conflict orphaned_directory
             right_type "deleted directory"
          ancestor_name ""
              left_type "renamed directory"
          ancestor_name ""
              left_name "bar"
          
               conflict orphaned_file
             right_type "deleted directory"
          ancestor_name "foo"
              left_type "added file"
              left_name "foo/baz"
           left_file_id [f5122a7f896cb2dd7ecaa84be89c94ab09c15101]
          
                  conflict orphaned_file
                right_type "deleted directory"
             ancestor_name "foo"
                 left_type "renamed file"
             ancestor_name "bar"
          ancestor_file_id [ac4c6d06436632e017bb7d3ea241734e8899f8ce]
                 left_name "foo/baz"
              left_file_id [ac4c6d06436632e017bb7d3ea241734e8899f8ce]
          
               conflict multiple_names
              left_type "renamed directory"
          ancestor_name ""
              left_name "aaa"
             right_type "renamed directory"
          ancestor_name ""
             right_name "bbb"
          
               conflict duplicate_name
              left_type "renamed directory"
          ancestor_name "foo"
              left_name ""
             right_type "renamed directory"
          ancestor_name "bar"
             right_name ""
          
               conflict multiple_names
              left_type "renamed directory"
          ancestor_name "foo"
              left_name "a/foo"
             right_type "renamed directory"
          ancestor_name "foo"
             right_name "b/foo"
     </pre>

          <p>Directory loop created:
<pre class="verbatim">          
               conflict directory_loop_created
              left_type "renamed directory"
          ancestor_name "foo"
              left_name "bar/foo"
             right_type "renamed directory"
          ancestor_name "bar"
             right_name "foo/bar"
     </pre>

          <p>File content changed (this may be resolvable by the internal line
merger), file also renamed:
<pre class="verbatim">          
                  conflict content
                 node_type "file"
             ancestor_name "bar"
          ancestor_file_id [f0ef49fe92167fe2a086588019ffcff7ea561786]
                 left_name "bar"
              left_file_id [08cd878106a93ce2ef036a32499c1432adb3ee0d]
                right_name "bar"
             right_file_id [0cf419dd93d38b2daaaf1f5e0f3ec647745b9690]
          
                  conflict content
                 node_type "file"
             ancestor_name "foo"
          ancestor_file_id [50bf338804db2685a575124c8c8371d06b65c523]
                 left_name "bar"
              left_file_id [f1bb6fff2ad16d67143d89fc374ede7abec5d437]
                right_name "baz"
             right_file_id [b966b2d35b99e456cb0c55e4573ef0b1b155b4a9]
     </pre>

          <p>File added and/or renamed:
<pre class="verbatim">          
               conflict duplicate_name
              left_type "added file"
              left_name "bar"
           left_file_id [ba4637112ee3e55a6106d647d6c4e04a6643f8eb]
             right_type "added file"
             right_name "bar"
          right_file_id [fe6d523f607e2f2fc0f0defad3bda0351a95a337]
          
                  conflict duplicate_name
                 left_type "renamed file"
             ancestor_name "foo"
          ancestor_file_id [c6864a8456855c48afe83488a47501fe8b94bd57]
                 left_name "bar"
              left_file_id [c6864a8456855c48afe83488a47501fe8b94bd57]
                right_type "added file"
                right_name "bar"
             right_file_id [c809d71002ec57a2f1d10221f05993012a491436]
          
                  conflict duplicate_name
                 left_type "renamed file"
             ancestor_name "foo"
          ancestor_file_id [918f3642b57a5e2dd13ee874e3dc2518a53ab4b4]
                 left_name "abc"
              left_file_id [918f3642b57a5e2dd13ee874e3dc2518a53ab4b4]
                right_type "renamed file"
             ancestor_name "bar"
          ancestor_file_id [bdf46a521d5f1dd54c31dda15e99ff6b0c80394a]
                right_name "abc"
             right_file_id [bdf46a521d5f1dd54c31dda15e99ff6b0c80394a]
     </pre>

          <p>File renamed to different names:
<pre class="verbatim">          
                  conflict multiple_names
                 left_type "renamed file"
             ancestor_name "foo"
          ancestor_file_id [e80910e54d0bdea1b6d295ada320b87aaf9fdc23]
                 left_name "bar"
              left_file_id [e80910e54d0bdea1b6d295ada320b87aaf9fdc23]
                right_type "renamed file"
             ancestor_name "foo"
          ancestor_file_id [e80910e54d0bdea1b6d295ada320b87aaf9fdc23]
                right_name "baz"
             right_file_id [e80910e54d0bdea1b6d295ada320b87aaf9fdc23]
     </pre>

          <p>Invalid file name (<samp><span class="file">_MTN</span></samp> in root directory):
<pre class="verbatim">          
               conflict invalid_name
              left_type "pivoted root"
          ancestor_name "foo"
             right_type "added directory"
             right_name "foo/_MTN"
          
                  conflict invalid_name
                 left_type "pivoted root"
             ancestor_name "foo"
                right_type "renamed file"
             ancestor_name "bad/_MTN"
          ancestor_file_id [629d9e5d254241abf4b46f108fb53189e314e41d]
                right_name "foo/_MTN"
             right_file_id [629d9e5d254241abf4b46f108fb53189e314e41d]
     </pre>

          <p>Revisions that don't share a common ancestor:
<pre class="verbatim">          
              left [161e426c3b0c3f98d0be225f69d6f893ce8e0442]
             right [0e3260f51acd1e98c40666557eb6c0eefeae5f02]
          ancestor []
          
          conflict missing_root
          
            conflict duplicate_name
           left_type "added directory"
           left_name ""
          right_type "added directory"
          right_name ""
     </pre>

          <br><dt><strong>Output format:</strong><dd>
First the revision ids of the left and right revisions, and their
common ancestor, are printed in one basic_io stanza.

          <p>Then each conflict is listed in a basic_io stanza. Stanzas are
separated by blank lines.

          <p>Each conflict stanza starts with a <code>conflict</code> line, and contains
up to eleven lines. The order of the lines is not important, and may
change in future revisions, except that the first line will always be
<code>conflict</code>.

          <p>When the conflicts involve files, the file ids are output, so the file
contents can be retrieved efficiently via <code>automate get_file</code>,
to aid in conflict resolution.

          <br><dt><strong>Error conditions:</strong><dd>
If the revision IDs are given, but either is unknown or
invalid, prints an error message to stderr and exits with status 1.

     </dl>

     <br><dt><samp><span class="command">mtn automate get_workspace_root</span></samp><a name="index-mtn-automate-get_005fworkspace_005froot-186"></a><dd>
          <dl>
<dt><strong>Arguments:</strong><dd>
None.

          <br><dt><strong>Added in:</strong><dd>
8.0

          <br><dt><strong>Purpose:</strong><dd>
To show the path of the workspace root for the current directory.

          <br><dt><strong>Sample output:</strong><dd>
<pre class="verbatim">          
          /home/jim/juice
     </pre>

          <br><dt><strong>Output format:</strong><dd>
A path.

          <br><dt><strong>Error conditions:</strong><dd>
If the current directory isn't part of a workspace, prints an error to
stderr and exits with status 1.

     </dl>

   </dl>

   </body></html>

