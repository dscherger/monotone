#include <iostream>
#include <fstream>
#include <string>

using namespace std;
int main(int argc, char **argv)
{
  if (argc != 3)
    {
      cerr << "usage: " << argv[0] << " <filename> <arrayname> " << endl;
      exit(1);
    }

  ifstream fin(argv[1]);
  string arr(argv[2]);

  if (!fin)
    {
      cerr << "could not open " << argv[1] << " for reading" << endl;
      exit(1);
    }

  char c;
  string dat;
  while(fin.get(c))
    dat += c;

  cout << "// DO NOT EDIT\n"
       << "// this file is automatically generated from " << argv[1] << ",\n"
       << "// any changes you make will be destroyed when it is regenerated\n"
       << "\n\n"
       << "static char const " << arr << "_constant[" << (dat.size() + 1) << "] = {\n";
  
  for (unsigned int i = 0; i < dat.size(); ++i)
    {
      if (i == 0) cout << "\t";
      else if (i % 20 == 0) cout << ",\n\t";
      else cout << ", ";
      cout << static_cast<int>(dat[i]);
    }
  cout << ", 0\n};\n";
}
